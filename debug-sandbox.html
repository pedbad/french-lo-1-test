<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>French LO Debug Sandbox (Dev Only)</title>
</head>
<body class="bg-background">
	<!--
	Dev-only entry URL:
	http://localhost:5173/projects/french-basic/debug-sandbox.html
	(when running `yarn dev`)
	-->
	<div id="debug-sandbox-root">
		<p style="font-family: sans-serif; padding: 1rem;">Loading debug sandbox...</p>
	</div>
	<script type="module">
		const root = document.getElementById('debug-sandbox-root');

		// Base-path behavior differs across local Vite setups. Try both candidate
		// module URLs so debug sandbox stays reachable even if base rewriting changes.
		const basePrefix = window.location.pathname.replace(/[^/]*$/, '');
		const candidates = Array.from(new Set([
			new URL(`${basePrefix}src/debug/sandbox-main.jsx`, window.location.origin).href,
			new URL('/src/debug/sandbox-main.jsx', window.location.origin).href,
		]));

		const errors = [];
		let loaded = false;
		for (const specifier of candidates) {
			try {
				// eslint-disable-next-line no-await-in-loop
				await import(/* @vite-ignore */ specifier);
				loaded = true;
				break;
			} catch (error) {
				errors.push(`${specifier}\n${error?.message || error}`);
			}
		}

		if (!loaded) {
			if (root) {
				const pre = document.createElement('pre');
				pre.style.whiteSpace = 'pre-wrap';
				pre.style.padding = '1rem';
				pre.style.color = 'crimson';
				pre.textContent = `Failed to load debug sandbox entry.\n\n${errors.join('\n\n')}`;
				root.replaceChildren(pre);
			}
			console.error('Debug sandbox entry failed to load (all candidates):', errors);
		}
	</script>
</body>
</html>
