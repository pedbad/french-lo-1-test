// Word.scss
// Styling for draggable word tiles and target blanks

@use "../../../styles/colours.module" as *;
@use "../../../styles/media-queries" as *;
@use "../../../styles/variables.module" as *;
@use "../../../styles/mixins.module" as *;

/* ==========================================================
   Highlight overlays (drag proximity + hints)
========================================================== */
.word.highlight span::after {
	content: "";
	position: absolute;
	inset: 0;

	z-index: 14;

	// background: radial-gradient(circle, rgba(122, 255, 255, 1) 0%, rgba(0, 212, 255, 0) 100%);
}

.show-hints .word.success.highlight span::after {
	background: radial-gradient(circle, var(--chart-2) 0%, transparent 100%);
}

/* ==========================================================
   Base tile appearance
========================================================== */
@mixin ph {
	border: 0;
	padding: 0.25rem 0.5rem;

	// background: $ivory;
	background: linear-gradient(135deg, color-mix(in oklab, var(--primary) 65%, black), var(--primary));
	color: var(--primary-foreground);

	font-weight: bold;
	min-height: 1.4rem;

	display: inline-block;

	@include respond-above(s) {
		padding: 0.4rem 1rem;
	}
}

/* ==========================================================
   Structural layout
========================================================== */
div.word {
	display: inline-flex;
	justify-content: center;
}

span.word {
	display: inline;
}

.word {
	user-select: none;
	transition-property: left, top, box-shadow; //, opacity;
	transition-duration: 1s;
	&.returning {
		// position: absolute;
		transition-property: left, top, box-shadow;
		transition-duration: 1s;
	}

	/* ---------------- Blank tile ---------------- */
	&.blank {
		position: relative;

		span {
			position: relative;
			z-index: 10;
			margin: 0.25rem;

			border-radius: $tile-border-radius;
			@include ph;

			// &::after {
			// 	@include standard-pseudo();
			// 	position: absolute;
			// 	border-radius: 6px;
			// 	box-shadow:
			// 		-2px -2px 2px inset black,
			// 		2px 2px 2px inset white;
			// }
		}
	}

	/* ---------------- Drag lifecycle ---------------- */

	&.dragged {
		position: absolute;
		cursor: grab;

		span {
			transition-property: left, top, box-shadow;
			transition-duration: 1s;
		}
	}

	&.dragging {
		position: absolute;
		z-index: 11;
		cursor: grab;

		transition:
			left 0s,
			top 0s,
			box-shadow 1s;

		span {
			box-shadow: 8px 8px 8px color-mix(in oklab, var(--foreground) 40%, transparent);
			transition: box-shadow 1s;
		}
	}

	&.placed {
		position: absolute;
		cursor: default;
		pointer-events: none;
		opacity: 1 !important;
		span {
			transition-property: left, top;
			transition-duration: 1s;
		}
	}
}

/* ==========================================================
   Large-screen spacing
========================================================== */
@include respond-above(l) {
	.word.blank span {
		margin: 0.2rem 1rem;
	}

	.type-group-table .word.blank span {
		margin: 0.2rem 0.2rem;
	}
}
